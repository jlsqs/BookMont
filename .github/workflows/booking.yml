name: Book Montgolfiere Class

on:
  schedule:
    # Mercredi à 7h25 (FR) = 5h25 (UTC)
    - cron: '25 5 * * 3'
    # Jeudi à 8h35 (FR) = 6h35 (UTC)
    - cron: '35 6 * * 4'
    # Vendredi à 7h25 (FR) = 5h25 (UTC)
    - cron: '25 5 * * 5'
    # Samedi à 8h30 (FR) = 6h30 (UTC)
    - cron: '30 6 * * 6'
    # Dimanche à 8h30 (FR) = 6h30 (UTC)
    - cron: '30 6 * * 0'
  workflow_dispatch:  # Permet l'exécution manuelle

jobs:
  book-class:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
        
    - name: Install dependencies
      run: npm ci
      
    - name: Create .env file
      run: |
        echo "MONTGOLFIERE_EMAIL=${{ secrets.MONTGOLFIERE_EMAIL }}" >> .env
        echo "MONTGOLFIERE_PASSWORD=${{ secrets.MONTGOLFIERE_PASSWORD }}" >> .env
        
    - name: Run booking script
      run: npm start 